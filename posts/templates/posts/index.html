{% extends 'base.html' %}


{% block title %}
    Посты
{% endblock %}


{% block content_title %}
    {% if search %}
        Все посты содержащие "{{ search }}"
    {% else %}
        Посты
    {% endif %}
{% endblock %}


{% block content %}

    {% for post in pages.items %}
        <p>
            <a href="{{ url_for('posts.open_post', slug=post.slug) }}">{{ post.title }}</a>
        </p>
    {% endfor %}

    <nav>
      <ul class="pagination">
            <li
                {% if not pages.has_prev %}
                    class="page-item disabled"
                {% endif %}>
                <a class="page-link" href="./?page={{ pages.prev_num }}{% if search %}&search={{ search }}{% endif %}">
                    Предыдущая
                </a>
            </li>

            {% for page in pages.iter_pages() %}

                {% if page != None %}
                    <li
                        {% if page == pages.page %}
                            class="page-item active"
                        {% endif %}
                        aria-current="page">
                        <a class="page-link" href="./?page={{ page }}{% if search %}&search={{ search }}{% endif %}">
                            {{ page }}
                        </a>
                    </li>

                {% else %}

                    <li class="page-item disabled">
                        <a class="page-link">...</a>
                    </li>
                {% endif %}

            {% endfor %}

            <li
                {% if not pages.has_next %}
                    class="page-item disabled"
                {% endif %}>
                <a class="page-link" href="./?page={{ pages.next_num }}{% if search %}&search={{ search }}{% endif %}">
                    Следующая
                </a>
            </li>
      </ul>
    </nav>

{% endblock %}
